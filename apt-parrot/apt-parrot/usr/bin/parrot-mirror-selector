#!/bin/bash

function list() {
	echo -e "Parrot Mirror Selector - set up the APT mirror you desire

MIRRORS
         codename -  speed   -  region       -   country       (provider)

            usa     -  1 Gbps  - north america  - massachussetts  (SIPB MIT)
            usa2    -  1 Gbps  - north america  -   michigan      (LUG MTU)
            usa3    -  1 Gbps  - north america  -   virginia      (JMU)
            usa4    -  1 Gbps  - north america  -   new york      (CLARKSON)
            usa5    -  1 Gbps  - north america  -  california     (BERKELEY)
            euro    - 10 Gbps  -   europe       -    italy        (GARR)
            euro2   - 250 Mbps -   europe       -    france       (FROZENBOX)
            euro3   - 20 Gbps  -   europe       -    germany      (RWTH-AACHEN)
            euro4   -  1 Gbps  -   europe       -    england      (WARWICK)
            euro5   - 10 Gbps  -   europe       -   netherland    (NLUUG)
            euro6   - 10 Gbps  -   europe       -    poland       (ONET)
            euro7   - 10 Gbps  -   europe       -    sweden       (UMU)
            euro8   - 10 Gbps  -   europe       -    ireland      (HEANET)
            euro9   - 10 Gbps  -   europe       -    germany      (ESSLINGEN)
            asia    -  1 Gbps  -    asia        -    russia       (YANDEX)
            asia2   -  1 Gbps  -    asia        -   bangladesh    (AMBERIT)
            asia3   - 10 Gbps  -    asia        -    taiwan       (NCHC)
            asia4   - 10 Gbps  -    asia        -   singapore     (0x)
            asia5   - 10 Mbps  -    asia        -     china       (YFGAO)
            sam     - 100 Mbps - south america  -    ecuador      (CEDIA)
            sam2    - 100 Mbps - south america  -    ecuador      (UTA)
            meast   -  1 Gpbs  -  middle east   -     iran        (ASIS)
            ocean   -  1 Gbps  -   oceania      - new caledonia   (LAGOON)
            africa  - 100 Mbps -   africa       -    tanzania     (APTUS)

BRANCHES
	current supported branches are
		parrot   - our stable archive
                stable   - same as parrot
		testing  - our development tree

AREAS
	current supported parameters are
		free     - includes only the main area
		nonfree  - includes main contrib non-free

USAGE
 	 parrot-mirror-selector <mirror> [branch] [archive area]

EXAMPLE
 	 parrot-mirror-selector asia stable free
"
}


branch="parrot"
case $2 in
	stable)
		branch="parrot"
	;;
	testing)
		branch="testing"
	;;
	parrot)
		branch="parrot"
	;;
	parrot-testing)
		branch="testing"
	;;
esac

areas="main contrib non-free"
case $3 in
	free)
		areas="main contrib non-free"
	;;
	nonfree)
		areas="main"
	;;
esac

case $1 in
	list)
		list
	;;
	usa)
		base="http://mit-usa.archive.parrotsec.org/parrot/"
	;;
	usa2)
		base="http://lug.mtu.edu/parrot/"
	;;
	usa3)
		base="http://mirror.jmu.edu/pub/parrot/"
	;;
	usa4)
		base="http://mirror.clarkson.edu/parrot/"
	;;
	usa5)
		base="http://mirrors.ocf.berkeley.edu/parrot/"
	;;
	euro)
		base="http://garr-euro.archive.parrotsec.org/mirrors/parrot/"
	;;
	euro2)
		base="http://frozenbox-euro.archive.parrotsec.org/parrot"
	;;
	euro3)
		base="http://rwth-aachen-euro.archive.parrotsec.org/parrotsec/"
	;;
	euro4)
		base="http://warwick-euro.archive.parrotsec.org/mirrors/parrot/"
	;;
	euro5)
		base="http://nluug-euro.archive.parrotsec.org/os/Linux/distr/parrot/"
	;;
	euro6)
		base="http://onet-euro.archive.parrotsec.org/pub/mirrors/parrot/"
	;;
	euro7)
		base="http://umu-euro.archive.parrotsec.org/mirror/parrotsec.org/parrot/"
	;;
	euro8)
		base="http://ftp.heanet.ie/pub/parrotsec/"
	;;
	euro9)
		base="http://esslingen-euro.archive.parrotsec.org/pub/Mirrors/archive.parrotsec.org/"
	;;
	asia)
		base="http://yandex-asia.archive.parrotsec.org/mirrors/parrot/"
	;;
	asia2)
		base="http://amberit-asia.archive.parrotsec.org/parrotsec/"
	;;
	asia3)
		base="http://free.nchc.org.tw/parrot/"
	;;
	asia4)
		base="http://mirror.0x.sg/parrot/"
	;;
	asia5)
		base="http://mirrors.yfgao.com/parrot/"
	;;
	sam)
		base="http://cedia-sam.archive.parrotsec.org/parrot/"
	;;
	sam2)
		base="http://uta-sam.archive.parrotsec.org/parrot/"
	;;
	sam3)
		base="http://ueb-sam.archive.parrotsec.org/parrot/"
	;;
	meast)
		base="http://parrot.asis.io/parrot/"
	;;
	ocean)
		base="http://lagoon-ocean.archive.parrotsec.org/pub/parrot/"
	;;
	africa)
		base="http://mirror.aptus.co.tz/pub/parrot/"
	;;
	*)
		list
	;;
esac

if [ "$base" != "" ]; then
	if [ "$branch" != "" ]; then
		if [ "$areas" != "" ]; then
			echo "# parrot repository" > /etc/apt/sources.list.d/parrot.list
			echo "# this file was automatically generated by parrot-mirror-selector" >> /etc/apt/sources.list.d/parrot.list
			echo "deb $base $branch $areas" >> /etc/apt/sources.list.d/parrot.list
			echo "#deb-src $base $branch $areas" >> /etc/apt/sources.list.d/parrot.list
		fi
	fi
fi


